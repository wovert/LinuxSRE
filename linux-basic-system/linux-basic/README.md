# Linux 基础入门-[零壹码博客](https://lingyima.com)

## 终端
> 用户与主机进行交互的设备
早期的大型主机，想使用的用户有很多，但主机只有一个，也不可能做到人手一台，但是可以做到在主机上接上一个分屏器，分屏器的每一个端子上可以接上一套键盘鼠标显示器，就可以直接在主机上面进行一些操作，这就相当于每个人在独立的操作一台计算机一样，像把一个端子上面所接入的鼠标、键盘、显示器所组成的一个组合，称之为终端。

所谓操作系统的多用户概念，就是基于此种模式而诞生的。终端可以说是一个程序，但严格意义上来是一个设备，因为终端所表现的是一些物理设备，如键盘、鼠标、显示器等。


### 终端的类型
- 物理终端
将显示器、键盘鼠标直接接在主机的接口之上，即本机自带的，直接连入的，我们称之为物理终端。	物理控制台 console 表示 `/dev/console`
在系统启动的时候，服务还没有全部起来，这个时候映射的是物理终端，在服务完成启动之后映射的是虚拟终端，当然还有图形终端。

- 虚拟终端
系统提供的6个虚拟终端，这些终端附加在物理终端之上的，用软件的方式虚拟实现的终端 centos 默认启用 6 个虚拟终端，可以使用快捷键来切换不同虚拟终端
切换方式：`Ctrl+Alt+F[1-6]`
虚拟终端路径文件设备： `/dev/tty/#`
系统启动之后通过虚拟终端来登录系统，即便是在物理设备上。

- 图形终端
附加在物理终端之上，用软件方式虚拟实现的终端，但额外会提供桌面环境，切换方式：`Ctrl+Alt+F7`

- 伪终端
图形界面下打开的命令行接口，还有基于ssh协议和telnet协议等远程打开的命令行界面
伪终端路径文件设备： `/dev/pts/#`

- 串行终端
伪终端路径文件设备：`/dev/ttyS[0-3]` 串口

- 查看当前的终端设备命令
`# tty`

- 终端实际上一个设备，一个设备要想与系统进行交互，必须有交互接口，当开启一个终端时，系统会自动在终端上运行一个交互式程序。

## 交互式程序
### GUI
> 图形化界面，是基于 [X 协议](https://baike.baidu.com/item/X%E8%A7%86%E7%AA%97%E7%B3%BB%E7%BB%9F%E5%8D%8F%E8%AE%AE)实现的窗口管理器（桌面、按钮的作用等）
- Linux 桌面系统
	+ [Gnome](https://www.gnome.org/)(C 程序开发，GTK开发库)
	+ [KDE](https://www.kde.org/)(C++ 程序开发，qt开发库)
	+ [xcfe](https://xfce.org/)(轻量级桌面)

### CLI
> 用户与系统交互，必须通过shell，不同的程序员开发的程序不一样。
- shell 程序：bash, zsh, sh, csh, tcsh, ksh

- 获取当前环境的shell
`# echo $SHELL`

- 显示当前系统使用的 shell 是哪种 shell
`# cat /etc/shells`

### TUI
- TUI：Text User Interface
`# nmtui`

- API：Application Program Interface 程序员面对的编程接口
- ABI：Application Binary Interface 程序应用者面对运行程序的接口
- POSIX：Portable Operating System 可移植操作系统

- 自动运行服务（不占接口，开机自动运行）：后台 daemon 程序
- 手动运行服务（占接口）：前台

## CLI 接口
### 命令行接口：
`[user@host ~]# COMMAND` prompt

[user@host ~] 称之为PS1, 靠环境变量定义，其组成部分可以使用 cho 命令来显示 echo $PS1
格式：[\u@\h\W]\$

- user: 当前登陆的用户名
- host: 当前主机的主机名，非完整格式；此处的完整格式为：host.lingyima.com
- ~: 用户当前所在的目录（current directory），也成为工作目录（working directory）；相对路径

`# 表示命令提示符，提示符有两种`
- #: 管理员账号，为 root；拥有最高权限，能执行所有操作
- $: 普通用户，非 root 用户；不具有管理权限，不能执行系统管理类操作

注意：使用非管理员账号登录；
	执行管理操作临时切换至管理员，操作完成即退回

- 所谓命令提示符，就是提示用户可以在此输入命令，那么输入命令意味着什么？
输入命令，然后回车：shell程序找到键入的命令所对应的可执行程序或代码，并由其分析后提交给内核分配资源将其运行起来，表现为一个或多个进程。
如：键入 ls, 先查找 ls 对应的执行程序：
`# which ls` 可查看 ls 命令所对应的可执行程序
`# whereis ls` 也可以获得 ls 有哪些帮助文件
有些命令是找不到其对应的可执行程序的，如 `cd`


## 基础命令
- `tty` 查看当前的终端设备
- `ifconfig`或`ip addr list` 查看活动接口的IP地址
- `echo` 回显
- `ping` 探测网络上目标主机与当前主机之间的连通性

- 关机命令：
	+ CentOS 7:
		`~]# systemctl poweroff`
		`~]# systemctl reboot`

	+ 通用命令
		`~]# poweroff`
		`~]# hatl`
		`~]# reboot`

- shutdown:
`shutdown [OPTIONS...] [TIME] [WALL...]`
	+ OPTIONS:
		* -h: halt
		* -c: cancle
		* -r: reboot
	+ TIME:
		* now
		* hh:mm
		* +m
		* +0=now

- `WALL` 向所有终端发送信息
	
`# shutdown -r +5 "after 5 minutes shutdown"`
`# wall "message information"`

**自由含义：自由学习和修改；自由使用；自由分发；自由创建衍生版；**

## Linux 哲学思想
1. 一切皆文件；
把几乎所有的资源统统抽象为文件形式；包括硬件设备，甚至通信接口等；
open(), read(), write(), close(), delete(), create()
2. 由众多目的单一的小程序组成；一个程序只做一件事，且做好；
组合目的单一的小程序完成复杂任务；
3. 尽量避免跟用户交互；
易于以编程的方式实现自动化任务；
4. 使用文本文件保存配置信息；
5. 提供机制，而非策略；

## 文件是什么？众多文件如何有效组织起来？

### 文件
> 存储空间存储的一段流式数据，对数据可以做到按名存取；
文件必须有名字，文件名与文件内容没有关系，文件名是文件的外围属性。
所以文件是文件名、大小、属性这些外围属性所组成的

- 文件有两类数据
	+ 元数据：metadata, 文件名，大小属性等
	+ 数据：data

文件索引信息就是元数据，而元数据所指向的就相当于数据。目录也是一种文件，是一种特殊的文件。

### 目录
> 是路径映射

### 文件名使用法则
- 文件名严格区分字符大小写
- 目录也是文件，在同一路径下，两个文件不能同名；
- 文件名使用出了 / 以外的任意字符，但不建议使用特殊字符
- 文件名长度最长不能超过 255 个字符
- 所有 . 开头的文件都为隐藏文件
- . 当前目录
- .. 当前目录的上一级目录

### 文件系统： 层级结构；有索引；
- /: 原初起点，根目录
- 第二层结构，子目录
- 第三层结构，子目录
- 倒置树状结构

- /dev/pts/2:
	+ 最左侧的`/`：表示**根目录**
	+ 其他的`/`：表示**路径分隔符**
		* Linux 的路径分隔符是 `/`
		* Windows 的是 `\`

### 文件的路径表示：
- 绝对路径：从根开始表示出的路径
- 相对路径：从当前位置开始表示出的路径

### 用户家目录 home
> 用户的起始目录：普通用户管理文件的位置

### 工作目录：
`/etc/sysconfig/network-scripts/ifcfg-eno16777736`
`basename` 最右侧的文件或目录名
`dirname` basename 左侧的路径

`~]# basename /PATH/TO/SOMEFILE`
**SOMEFILE**

`~]# dirname /PATH/TO/SOMEFILE`
**/PATH/TO**

## 参考书籍
- 《穿越计算机的迷雾》
- 《量子物理史话》


## 命令格式

### 命令的语法通用格式:
- `COMMAND [OPTIONS...] [ARGUMENTS...]`
- 命令     选项    参数

### COMMAND
> 发起一个命令，请求内核将某个二进制程序运行为一个进程：
- 程序转为进程
- 静态转为动态（有生命周期）

- 命令本身是一个可执行的程序文件：二进制格式的文件，有可能会调用共享库文件
	+ 多数系统自带程序文件都存放在：**/bin, /sbin, /usr/bin, /usr/sbin**
	+ 第三方程序文件：**/usr/local/bin, /usr/local/sbin**

	+ 普通命令： **/bin, /usr/bin, /usr/local/bin**
	+ 管理命令：**/sibn, /usr/sbin, /usr/local/sbin**

	+ 注意：并非所有的命令都有一个在某目录与之对应的可执行程序文件（内置命令）

	+ 共享库：**/lib, /lib64, /usr/lib, /usr/lib64, /usr/local/lib, /usr/local/lib64**
		* 32bits 库：**/lib, /usr/lib, /usr/local/lib**
		* 64bits 库：**/lib64, /usr/lib64, /usr/local/lib64**

### 命令必须遵循特定格式规范
- Windows: **exe,msi**
- Linux: **ELF**

- 查看可执行文件格式
`~]# file /bin/ls`

### 命令分类
- __内置命令__(builtin)：由shell程序自带的命令
- __外部命令__：独立的可执行程序文件，文件名即命令名

注意：命令可以有别名，别名可以与原名相同，此时原名被隐藏；此时如果要运行**原命令**，则使用`\command`

### alias 命令别名
- 获取所有可用别名的定义：
`~]# alias`

- 定义别名：仅对当前shell有效
`~]# alias COMMAND_ALIAS='COMMAND'`
		
### shell程序是独特的程序，负责解析用户提供的命令
- 环境变量
	+ **PATH**：从哪些路径中查找用户键入的命令字符串所对应的命令文件
		* `~]# echo $PATH`
		* /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
	+ 查找次序：自左而右
	+ 注意：只有**外部命令**根据环境变量`$PATH`查找命令文件

### 查看命令类型
`~]# type COMMAND`

###	OPTIONS 选项
> 调整命令的运行特性

- 选项分类
	+ 短选项：-C，例如：-l, -ld
		* 同一命令同时使用多个短选项，多数可合并：-l -d = -ld
		* 注意：有些命令的选项没有-
		
	+ 长选项：-word, 例如：--help, --human-reable
		* 注意：长选项不能合并多个选项

	+ 注意：有些选项可以带参数，称为**选项参数**

### ARGUMENTS 参数
> 命令的作用对象；命令对什么生效

`~]# ls -l /var`
- 注意：不同的命令的参数，有些命令可同时带**多个参数**，多个之间以空白字符分割
`~]# ls -l -l /var /etc` 命令 -选项 -选项 参数 参数

### 执行多个命令
`~]# command; command; command`

### 取消命令
`Ctrl+c` 终止命令执行


## 命令帮助

